groups:
- neurodata_type_def: GroupedDynamicTable
  neurodata_type_inc: DynamicTable
  doc: A DynamicTable that supports grouing of columns by a set of user-defined categories
  attributes:
  - name: colgroups
    dtype: text
    dims:
    - num_columns
    shape:
    - null
    doc: For each column specify the name of the category the column is in. The ordering
      of columns in the this dataset are expected to be the same as in the colnames
      attribute. Columns should be ordered such that columns in the same category
      appear in order
- neurodata_type_def: IntracellularRecordingsTable
  neurodata_type_inc: GroupedDynamicTable
  name: intracellular_recordings
  doc: A table to group together a stimulus and response from a single electrode and
    a single simultaneous recording. Each row in the table represents a single recording
    consisting typically of a stimulus and a corresponding response. In some cases,
    however, only a stimulus or a response are recorded as as part of an experiment.
    In this case both, the stimulus and resposne will point to the same TimeSeries
    while the idx_start and count of the invalid column will be set to -1, thus, indicating
    that no values have been recorded for the stimulus or response, respectively.
    Note, a recording MUST contain at least a stimulus or a response. Typically the
    stimulus and response are PatchClampSeries. However, the use of AD/DA channels
    that are not associated to an electrode is also common in intracellular electrophysiology,
    in which case other TimeSeries may be used.
  attributes:
  - name: colnames
    dtype: text
    dims:
    - num_columns
    shape:
    - null
    default_value:
    - electrode
    - stimulus
    - response
    doc: The names of the columns in this table. This should be used to specify an
      order to the columns.
    required: false
  - name: colgroups
    dtype: text
    dims:
    - num_columns
    shape:
    - null
    default_value:
    - electrode
    - stimulus
    - response
    doc: For each column specify the name of the category the column is in. The ordering
      of columns in the this dataset are expected to be the same as in the colnames
      attribute. Columns should be ordered such that columns in the same category
      appear in order
    required: false
  datasets:
  - name: stimulus
    neurodata_type_inc: VectorData
    dtype:
    - name: idx_start
      dtype: int32
      doc: Start index into the TimeSeries 'data' and 'timestamp' datasets of the
        referenced TimeSeries. The first dimension of those arrays is always time.
    - name: count
      dtype: int32
      doc: Number of data samples available in this time series, during this epoch
    - name: timeseries
      dtype:
        target_type: TimeSeries
        reftype: object
      doc: The TimeSeries that this index applies to
    doc: Column storing the reference to the recorded stimulus for the recording (rows).
      The column must have the assigned colgroup value "stimulus"
  - name: response
    neurodata_type_inc: VectorData
    dtype:
    - name: idx_start
      dtype: int32
      doc: Start index into the TimeSeries 'data' and 'timestamp' datasets of the
        referenced TimeSeries. The first dimension of those arrays is always time.
    - name: count
      dtype: int32
      doc: Number of data samples available in this time series, during this epoch
    - name: timeseries
      dtype:
        target_type: TimeSeries
        reftype: object
      doc: The TimeSeries that this index applies to
    doc: Column storing the reference to the recorded response for the recording (rows)
      The column must have the assigned colgroup value "response"
  - name: electrode
    neurodata_type_inc: VectorData
    dtype:
      target_type: IntracellularElectrode
      reftype: object
    doc: Column for storing the reference to the intracellular electrode. The column
      must have the assigned colgroup value "electrode"
- neurodata_type_def: SimultaneousRecordingsTable
  neurodata_type_inc: DynamicTable
  name: simultaneous_recordings
  doc: A table for grouping different intracellular recordings from the IntracellularRecordingsTable
    table together that were recorded simultaneously from different electrodes
  datasets:
  - name: recordings
    neurodata_type_inc: DynamicTableRegion
    doc: A reference to one or more rows in the IntracellularRecordingsTable table.
    attributes:
    - name: table
      dtype:
        target_type: IntracellularRecordingsTable
        reftype: object
      doc: Reference to the IntracellularRecordingsTable table that this table region
        applies to. This specializes the attribute inherited from DynamicTableRegion
        to fix the type of table that can be referenced here.
  - name: recordings_index
    neurodata_type_inc: VectorIndex
    doc: Index dataset for the recordings column.
- neurodata_type_def: SequentialRecordingsTable
  neurodata_type_inc: DynamicTable
  name: sequential_recordings
  doc: A table for grouping different sequential recordings from the SimultaneousRecordingsTable
    table together. This is typically used to group together sequential recordings
    where the a sequence of stimuli of the same type with varying parameters have
    been presented in a sequence.
  datasets:
  - name: simultaneous_recordings
    neurodata_type_inc: DynamicTableRegion
    doc: A reference to one or more rows in the SimultaneousRecordingsTable table.
    attributes:
    - name: table
      dtype:
        target_type: SimultaneousRecordingsTable
        reftype: object
      doc: Reference to the SimultaneousRecordingsTable table that this table region
        applies to. This specializes the attribute inherited from DynamicTableRegion
        to fix the type of table that can be referenced here.
  - name: simultaneous_recordings_index
    neurodata_type_inc: VectorIndex
    doc: Index dataset for the simultaneous_recordings column.
  - name: stimulus_type
    neurodata_type_inc: VectorData
    dtype: text
    doc: The type of stimulus used for the sequential recording
- neurodata_type_def: RepetitionsTable
  neurodata_type_inc: DynamicTable
  name: repetitions
  doc: A table for grouping different sequential intracellular recordings together.
    With each SequentialRecording typically representing a particular type of stimulus,
    the RepetitionsTable table is typically used to group sets of stimuli applied
    in sequence.
  datasets:
  - name: sequential_recordings
    neurodata_type_inc: DynamicTableRegion
    doc: A reference to one or more rows in the SequentialRecordingsTable table.
    attributes:
    - name: table
      dtype:
        target_type: SequentialRecordingsTable
        reftype: object
      doc: Reference to the SequentialRecordingsTable table that this table region
        applies to. This specializes the attribute inherited from DynamicTableRegion
        to fix the type of table that can be referenced here.
  - name: sequential_recordings_index
    neurodata_type_inc: VectorIndex
    doc: Index dataset for the sequential_recordings column.
- neurodata_type_def: ExperimentalConditionsTable
  neurodata_type_inc: DynamicTable
  name: experimental_conditions
  doc: A table for grouping different intracellular recording repetitions together
    that belong to the same experimental experimental_conditions.
  datasets:
  - name: repetitions
    neurodata_type_inc: DynamicTableRegion
    doc: A reference to one or more rows in the RepetitionsTable table.
    attributes:
    - name: table
      dtype:
        target_type: RepetitionsTable
        reftype: object
      doc: Reference to the RepetitionsTable table that this table region applies
        to. This specializes the attribute inherited from DynamicTableRegion to fix
        the type of table that can be referenced here.
  - name: repetitions_index
    neurodata_type_inc: VectorIndex
    doc: Index dataset for the repetitions column.
- neurodata_type_def: ICEphysFile
  neurodata_type_inc: NWBFile
  doc: 'Extension of the NWBFile class to allow placing the new icephys metadata types
    in /general/intracellular_ephys in the NWBFile NOTE: If this proposal for extension
    to NWB gets merged with the core schema, then this type would be removed and the
    NWBFile specification updated instead'
  groups:
  - name: general
    doc: expand definition of general from NWBFile
    groups:
    - name: intracellular_ephys
      doc: expand definition from NWBFile
      datasets:
      - name: filtering
        dtype: text
        doc: '[DEPRECATED] Use IntracellularElectrode.filtering instead. Description
          of filtering used. Includes filtering type and parameters, frequency fall-off,
          etc. If this changes between TimeSeries, filter description should be stored
          as a text attribute for each TimeSeries.'
        quantity: '?'
      groups:
      - name: intracellular_recordings
        neurodata_type_inc: IntracellularRecordingsTable
        doc: A table to group together a stimulus and response from a single electrode
          and a single simultaneous recording. Each row in the table represents a
          single recording consisting typically of a stimulus and a corresponding
          response. In some cases, however, only a stimulus or a response are recorded
          as as part of an experiment. In this case both, the stimulus and resposne
          will point to the same TimeSeries while the idx_start and count of the invalid
          column will be set to -1, thus, indicating that no values have been recorded
          for the stimulus or response, respectively. Note, a recording MUST contain
          at least a stimulus or a response. Typically the stimulus and response are
          PatchClampSeries. However, the use of AD/DA channels that are not associated
          to an electrode is also common in intracellular electrophysiology, in which
          case other TimeSeries may be used.
        quantity: '?'
      - name: simultaneous_recordings
        neurodata_type_inc: SimultaneousRecordingsTable
        doc: A table for grouping different intracellular recordings from the IntracellularRecordingsTable
          table together that were recorded simultaneously from different electrodes
        quantity: '?'
      - name: sequential_recordings
        neurodata_type_inc: SequentialRecordingsTable
        doc: A table for grouping different sequential recordings from the SimultaneousRecordingsTable
          table together. This is typically used to group together sequential recordings
          where the a sequence of stimuli of the same type with varying parameters
          have been presented in a sequence.
        quantity: '?'
      - name: repetitions
        neurodata_type_inc: RepetitionsTable
        doc: A table for grouping different sequential intracellular recordings together.
          With each SequentialRecording typically representing a particular type of
          stimulus, the RepetitionsTable table is typically used to group sets of
          stimuli applied in sequence.
        quantity: '?'
      - name: experimental_conditions
        neurodata_type_inc: ExperimentalConditionsTable
        doc: A table for grouping different intracellular recording repetitions together
          that belong to the same experimental experimental_conditions.
        quantity: '?'
      - name: sweep_table
        neurodata_type_inc: SweepTable
        doc: '[DEPRACATED] Table used to group different PatchClampSeries.SweepTable
          is being replaced by IntracellularRecordingsTable and SimultaneousRecordingsTable
          tabels (and corresponding SequentialRecordingsTable, RepetitionsTable and
          ExperimentalConditions tables.'
        quantity: '?'
